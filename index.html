<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daynight RP ‚Äî PDA / CAD (Final)</title>
  <meta name="description" content="PDA/CAD Daynight RP ‚Äî BOLO, Multas, Alertas, Entornos, Notificaciones estilo FiveM.">

  <style>
    :root{
      --bg-1:#040615;--bg-2:#071428;--panel:rgba(255,255,255,0.03);--glass:rgba(255,255,255,0.02);
      --border:rgba(255,255,255,0.05);--muted:#9fb3bd;--text:#E9F9FF;
      --accent-violet:#7C3AED;--accent-cyan:#06B6E4;--success:#30D39A;--danger:#FF6B6B;
      --radius:12px;--shadow:0 16px 48px rgba(2,6,10,0.65);--fast:180ms;--med:280ms;
      font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    }
    html,body{height:100%;margin:0;background:
      radial-gradient(900px 380px at 12% 8%,rgba(124,58,237,0.06),transparent 20%),
      linear-gradient(180deg,var(--bg-1),var(--bg-2) 70%);
      color:var(--text);-webkit-font-smoothing:antialiased;}
    *{box-sizing:border-box}
    .wrap{max-width:1200px;margin:18px auto;padding:18px;position:relative;z-index:5}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent-cyan),var(--accent-violet));display:grid;place-items:center;color:#02141a;font-weight:900}
    .brand h1{margin:0;font-size:18px}.subtitle{font-size:12px;color:var(--muted)}
    .top-right{display:flex;gap:8px;align-items:center}
    .pill{background:var(--glass);padding:8px 12px;border-radius:999px;color:var(--muted);font-weight:700}
    .btn{background:linear-gradient(90deg,var(--accent-violet),var(--accent-cyan));border:none;color:#02141a;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:800;box-shadow:0 10px 26px rgba(20,10,60,0.12)}
    .btn-ghost{background:transparent;border:1px solid var(--border);color:var(--muted);padding:7px 10px;border-radius:10px;cursor:pointer}
    .btn-sm{padding:6px 8px;font-size:13px;border-radius:9px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:14px}
    @media(max-width:980px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:640px){.grid{grid-template-columns:1fr}}
    .panel{background:var(--panel);border-radius:var(--radius);padding:14px;border:1px solid var(--border);box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;transition:transform var(--med) ease,box-shadow var(--fast)}
    .panel:hover{transform:translateY(-6px);box-shadow:0 30px 80px rgba(0,0,0,0.6);border-color:rgba(124,58,237,0.12)}
    .panel .title{font-weight:900;color:var(--accent-violet)}.panel .sub{color:var(--muted);font-size:13px}
    .list{display:flex;flex-direction:column;gap:8px;overflow:auto}
    .item{display:flex;justify-content:space-between;align-items:center;padding:10px;background:rgba(255,255,255,0.02);border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
    .item-left{max-width:72%}.item-title{font-weight:800}.item-meta{font-size:13px;color:var(--muted)}
    .panel-actions{display:flex;gap:8px;justify-content:flex-end}
    #toasts{position:fixed;right:18px;top:72px;z-index:99999;display:flex;flex-direction:column;gap:10px;width:360px;pointer-events:none}
    .toast{pointer-events:auto;display:flex;gap:12px;align-items:flex-start;padding:12px;border-radius:10px;background:linear-gradient(90deg,var(--accent-cyan),var(--accent-violet));color:#02141a;font-weight:800;box-shadow:0 12px 38px rgba(2,6,10,0.6);animation:toastIn .22s}
    @keyframes toastIn{from{opacity:0;transform:translateY(-8px) scale(.98)}to{opacity:1;transform:none}}
    .toast .t-body{font-weight:700;color:rgba(2,20,26,0.92)}.toast .t-close{margin-left:auto;background:transparent;border:none;color:rgba(2,20,26,0.85);font-weight:900;cursor:pointer}
    .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.5);z-index:99999}
    .modal{background:var(--panel);border-radius:12px;padding:16px;min-width:320px;box-shadow:0 14px 40px rgba(2,6,10,0.6)}
    input{background:transparent;border:1px solid var(--border);color:var(--text);padding:8px;border-radius:8px;width:100%}
    .muted{color:var(--muted)}.hidden{display:none}.pulse{animation:pulse .9s}@keyframes pulse{0%{box-shadow:0 0 0 rgba(124,58,237,0.12)}70%{box-shadow:0 0 30px rgba(124,58,237,0.04)}100%{box-shadow:none}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">PDA</div>
        <div>
          <h1>Daynight RP ‚Äî PDA / CAD</h1>
          <div class="subtitle">BOLO ¬∑ Multas ¬∑ Alertas ¬∑ Entornos</div>
        </div>
      </div>
      <div class="top-right">
        <div id="userDisplay" class="pill">No conectado</div>
        <button id="refreshAll" class="btn-ghost">Refrescar todo</button>
        <button id="exportBtn" class="btn">Exportar</button>
        <button id="btnLogin" class="btn-ghost">Entrar</button>
      </div>
    </header>

    <section class="grid" id="panelsRoot">
      <div class="panel" id="panel-bolos"><div class="title">üöì BOLOs</div><div class="sub">Personas o veh√≠culos buscados</div><div class="panel-actions"><button class="btn-ghost btn-sm" data-refresh="bolos">‚ü≥</button><button class="btn btn-sm" data-open="bolos">Abrir</button></div><div class="list" id="bolosPreview"><div class="muted">Cargando...</div></div></div>
      <div class="panel" id="panel-multas"><div class="title">üí∞ Multas</div><div class="sub">Registro de infracciones</div><div class="panel-actions"><button class="btn-ghost btn-sm" data-refresh="multas">‚ü≥</button><button class="btn btn-sm" data-open="multas">Abrir</button></div><div class="list" id="multasPreview"><div class="muted">Cargando...</div></div></div>
      <div class="panel" id="panel-alertas"><div class="title">üö® Alertas</div><div class="sub">Avisos y llamadas entrantes</div><div class="panel-actions"><button class="btn-ghost btn-sm" data-refresh="alertas">‚ü≥</button><button class="btn btn-sm" data-open="alertas">Abrir</button></div><div class="list" id="alertasPreview"><div class="muted">Cargando...</div></div></div>
      <div class="panel" id="panel-entornos"><div class="title">üóíÔ∏è Entornos</div><div class="sub">Registros autom√°ticos y eventos</div><div class="panel-actions"><button class="btn-ghost btn-sm" data-refresh="entornos">‚ü≥</button><button class="btn btn-sm" data-open="entornos">Abrir</button></div><div class="list" id="entornosPreview"><div class="muted">Cargando...</div></div></div>
      <div class="panel" id="panel-vehiculos"><div class="title">üöó Veh√≠culos</div><div class="sub">B√∫squeda y control</div><div class="panel-actions"><button class="btn-ghost btn-sm" data-refresh="vehiculos">‚ü≥</button><button class="btn btn-sm" data-open="vehiculos">Abrir</button></div><div class="list" id="vehiculosPreview"><div class="muted">Cargando...</div></div></div>
      <div class="panel" id="panel-armas"><div class="title">üî´ Armamento</div><div class="sub">Inventario y equipamiento</div><div class="panel-actions"><button class="btn-ghost btn-sm" data-refresh="armas">‚ü≥</button><button class="btn btn-sm" data-open="armas">Abrir</button></div><div class="list" id="armasPreview"><div class="muted">Cargando...</div></div></div>
      <div class="panel" id="panel-oficiales"><div class="title">üëÆ‚Äç‚ôÇÔ∏è Oficiales</div><div class="sub">Personal en servicio</div><div class="panel-actions"><button class="btn-ghost btn-sm" data-refresh="oficiales">‚ü≥</button><button class="btn btn-sm" data-open="oficiales">Abrir</button></div><div class="list" id="oficialesPreview"><div class="muted">Cargando...</div></div></div>
      <div class="panel" id="panel-informes"><div class="title">üìÇ Informes</div><div class="sub">Casos e investigaciones</div><div class="panel-actions"><button class="btn-ghost btn-sm" data-refresh="informes">‚ü≥</button><button class="btn btn-sm" data-open="informes">Abrir</button></div><div class="list" id="informesPreview"><div class="muted">Cargando...</div></div></div>
      <div class="panel" id="panel-historial"><div class="title">üïì Historial</div><div class="sub">Notificaciones recientes</div><div class="panel-actions"><button class="btn-ghost btn-sm" data-refresh="historial">‚ü≥</button><button class="btn btn-sm" data-open="historial">Abrir</button></div><div class="list" id="historialPreview"><div class="muted">Cargando...</div></div></div>
    </section>

    <div id="expandedRoot"></div>
  </div>

  <div id="loginModal" class="overlay">
    <div class="modal">
      <h3>Acceso ‚Äî Daynight RP</h3>
      <div class="muted small">Introduce tus credenciales o entra como invitado.</div>
      <label class="muted small">Usuario</label><input id="loginUser" placeholder="usuario"/>
      <label class="muted small">Contrase√±a</label><input id="loginPass" type="password" placeholder="contrase√±a"/>
      <div style="display:flex;gap:8px;margin-top:12px">
        <button id="loginBtnModal" class="btn">Entrar</button>
        <button id="guestBtnModal" class="btn-ghost">Invitado</button>
        <button id="closeLoginModal" class="btn-ghost">Cerrar</button>
      </div>
      <div id="loginError" class="muted small" style="margin-top:8px;color:#ff9b9b;display:none"></div>
    </div>
  </div>

  <div id="toasts"></div>

  <script>
  const $=s=>document.querySelector(s);const $$=s=>document.querySelectorAll(s);
  const STATE={bolos:[],multas:[],alertas:[],entornos:[],vehiculos:[],armas:[],oficiales:[],informes:[],historial:[]};
  function notif(t="info",m="",ttl=4500){const n=document.createElement("div");n.className="toast";n.innerHTML=`<div class="t-body">${m}</div><button class="t-close">√ó</button>`;$("#toasts").prepend(n);n.querySelector(".t-close").onclick=()=>n.remove();if(ttl>0)setTimeout(()=>n.remove(),ttl);}
  function makeMuted(t){const d=document.createElement("div");d.className="muted";d.textContent=t;return d;}
  function renderPanel(id,arr,typ){const c=$(`#${id}Preview`);if(!c)return;c.innerHTML="";if(!arr.length){c.appendChild(makeMuted("Sin registros"));return;}arr.slice(0,6).forEach(x=>{const d=document.createElement("div");d.className="item";d.innerHTML=`<div class="item-left"><div class="item-title">${x.nombre||x.infractor||x.tipo||x.autor||x.titulo||'‚Äî'}</div><div class="item-meta">${x.motivo||x.detalle||x.descripcion||x.cantidad||''}</div></div>`;c.appendChild(d);});}
  function refreshAll(){Object.keys(STATE).forEach(k=>renderPanel(k,STATE[k]||[],k));notif("info","Paneles actualizados");}
  async function newBolo(){const n=prompt("Nombre del sujeto:");if(!n)return;const m=prompt("Motivo:")||"";STATE.bolos.unshift({nombre:n,motivo:m});renderPanel("bolos",STATE.bolos,"bolos");notif("success","BOLO a√±adido");}
  async function newMulta(){const n=prompt("Infractor:");if(!n)return;const m=prompt("Motivo:")||"";const c=parseFloat(prompt("Importe (‚Ç¨):")||"0");STATE.multas.unshift({infractor:n,motivo:m,cantidad:c});renderPanel("multas",STATE.multas,"multas");notif("success","Multa creada");}
  async function newAlerta(){const t=prompt("T√≠tulo:");if(!t)return;const d=prompt("Descripci√≥n:")||"";STATE.alertas.unshift({tipo:t,detalle:d});renderPanel("alertas",STATE.alertas,"alertas");notif("warn","Alerta enviada");}
  function openPanel(name){notif("info","Panel abierto",name);}
  window.addEventListener("DOMContentLoaded",()=>{$$("[data-refresh]").forEach(b=>b.onclick=e=>{const k=e.target.dataset.refresh;renderPanel(k,STATE[k]||[],k);notif("info","Refrescado "+k)});$$("[data-open]").forEach(b=>b.onclick=e=>openPanel(e.target.dataset.open));$("#refreshAll").onclick=refreshAll;$("#exportBtn").onclick=()=>{const blob=new Blob([JSON.stringify(STATE,null,2)],{type:"application/json"});const a=document.createElement("a");a.href=URL.createObjectURL(blob);a.download="pda_export.json";a.click();notif("success","Exportado JSON");};$("#btnLogin").onclick=()=>$("#loginModal").style.display="flex";$("#closeLoginModal").onclick=()=>$("#loginModal").style.display="none";$("#guestBtnModal").onclick=()=>{$("#loginModal").style.display="none";$("#userDisplay").textContent="Invitado";notif("info","Modo invitado activo");};$("#loginBtnModal").onclick=()=>{const u=$("#loginUser").value.trim();const p=$("#loginPass").value.trim();if(!u||!p){$("#loginError").textContent="Introduce usuario y contrase√±a";$("#loginError").style.display="block";return;}$("#loginModal").style.display="none";$("#userDisplay").textContent=u;notif("success","Bienvenido "+u);};
    STATE.bolos=[{nombre:"John Doe",motivo:"Robo a mano armada"},{nombre:"Jane S.",motivo:"Fuga de tr√°fico"}];
    STATE
